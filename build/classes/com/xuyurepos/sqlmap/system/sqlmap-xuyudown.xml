<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE mapper  
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
     <mapper namespace="com.xuyurepos.dao.system.XuyuDownDao">
	 <resultMap type="com.xuyurepos.entity.system.XuyuDown" id="xuyuDown" >
	    <!--
	      WARNING - @mbggenerated
	      This element is automatically generated by MyBatis Generator, do not modify.
	      This element was generated on Tue Jun 18 13:28:44 CST 2019.
	    -->
	    <id column="ID" jdbcType="INTEGER" property="id" />
	    <result column="ORG_ID" jdbcType="VARCHAR" property="orgId" />
	    <result column="CREATE_DATE" jdbcType="TIMESTAMP" property="createDate" />
	    <result column="CREATE_USER" jdbcType="VARCHAR" property="createUser" />
	    <result column="FILENAME" jdbcType="VARCHAR" property="filename" />
	    <result column="FILEPATH" jdbcType="VARCHAR" property="filepath" />
	    <result column="ANNEXE_NAME" jdbcType="VARCHAR" property="annexeName" />
	    <result column="DOWN_TYPE" jdbcType="CHAR" property="downType" />
	    <result column="STATU" jdbcType="CHAR" property="statu" />
	 </resultMap>
    
    <select id="find" parameterType="String" resultType="com.xuyurepos.entity.system.XuyuDown">
          select * from XUYU_DOWN t1 where t1.ID=#{id}
    </select>
    
    <delete id="del" parameterType="String">
          delete from XUYU_DOWN 
          where  ID=#{id}
     </delete>
    
    <insert id="insert" parameterType="com.xuyurepos.entity.system.XuyuDown">
		    <selectKey keyColumn="id" keyProperty="id" order="AFTER"
		        resultType="int">
		        SELECT LAST_INSERT_ID()
		    </selectKey>
	       insert into XUYU_DOWN ( ORG_ID, CREATE_DATE, 
		      CREATE_USER, FILENAME, FILEPATH, 
		      ANNEXE_NAME, DOWN_TYPE,STATU)
		    values (#{orgId,jdbcType=VARCHAR}, #{createDate,jdbcType=TIMESTAMP}, 
		      #{createUser,jdbcType=VARCHAR}, #{filename,jdbcType=VARCHAR}, #{filepath,jdbcType=VARCHAR}, 
		      #{annexeName,jdbcType=VARCHAR}, #{downType,jdbcType=CHAR}, #{statu,jdbcType=CHAR})
    </insert>
    
         
     <update id="update" parameterType="com.xuyurepos.entity.system.XuyuDown">
          UPDATE XUYU_DOWN SET
	      ORG_ID = #{orgId,jdbcType=VARCHAR},
	      CREATE_DATE = #{createDate,jdbcType=TIMESTAMP},
	      CREATE_USER = #{createUser,jdbcType=VARCHAR},
	      FILENAME = #{filename,jdbcType=VARCHAR},
	      FILEPATH = #{filepath,jdbcType=VARCHAR},
	      ANNEXE_NAME = #{annexeName,jdbcType=VARCHAR},
	      DOWN_TYPE = #{downType,jdbcType=CHAR},
	      STATU = #{statu,jdbcType=CHAR}
          WHERE ID=#{id}
          
     </update>
    
    <sql id="sql_count">
        SELECT COUNT(*)
    </sql>
    
    <sql id="sql_select">
        SELECT *
    </sql>
    
    <sql id="sql_where">
        FROM XUYU_DOWN
        <where>
            <if test="queryObj != null">
                <if test="queryObj.createUser != null and queryObj.createUser != ''">
                    AND CREATE_USER= 
                    '${queryObj.createUser}'
                </if>
                <if test="queryObj.downType != null and queryObj.downType != ''">
                    AND DOWN_TYPE= 
                    '${queryObj.downType}'
                </if>
                <if test="queryObj.statu != null and queryObj.statu != ''">
                    AND STATU= 
                    '${queryObj.statu}'
                </if>
            </if>
        </where>
        
        order by CREATE_DATE desc
    </sql>
    
   <select id="selectUserListWithPage" parameterType="com.xuyurepos.common.page.PageModel" resultType="com.xuyurepos.entity.system.XuyuDown">
        <include refid="sql_select"></include>
        <include refid="sql_where"></include>
        <if test="pageNumber != null and  pageSize!= null">
            limit #{startRow},#{pageSize}
        </if>
    </select>

    <select id="selectUserCountWithPage" parameterType="com.xuyurepos.common.page.PageModel" resultType="Integer">
        <include refid="sql_count"></include>
        <include refid="sql_where"></include>
    </select>
  
</mapper>