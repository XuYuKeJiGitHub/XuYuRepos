<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE mapper    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xuyurepos.dao.payment.XuyuPayaddressDao">
	<resultMap type="com.xuyurepos.entity.payment.XuyuPayaddress" id="xuyuPayaddress">
		<!-- column存数据库中的属性   property存javabean中数据-->
	    <id column="ID" jdbcType="BIGINT" property="id" />
	    <result column="AGENCY_ID" jdbcType="VARCHAR" property="agencyId" />
	    <result column="UUID" jdbcType="VARCHAR" property="uuid" />
	    <result column="ADDRESS" jdbcType="VARCHAR" property="address" />
	    <result column="TYPE" jdbcType="CHAR" property="type" />
	    <result column="ORG_NAME" jdbcType="VARCHAR" property="orgName" />
	</resultMap>
	
	
	<select id="findByUuid" parameterType="String" resultType="com.xuyurepos.entity.payment.XuyuPayaddress">
          select * from XUYU_PAYADDRESS t1 where t1.UUID=#{uuid}
    </select>
	
    <insert id="insert" parameterType="com.xuyurepos.entity.payment.XuyuPayaddress">
	    <!--
	      WARNING - @mbggenerated
	      This element is automatically generated by MyBatis Generator, do not modify.
	      This element was generated on Wed May 08 10:26:05 CST 2019.
	    -->
	    insert into XUYU_PAYADDRESS (AGENCY_ID, UUID, 
	      ADDRESS, TYPE)
	    values (#{agencyId,jdbcType=VARCHAR}, #{uuid,jdbcType=VARCHAR}, 
	      #{address,jdbcType=VARCHAR}, #{type,jdbcType=CHAR})
    </insert>
   
    <sql id="sql_count">
        SELECT COUNT(*)
    </sql>
    
    <sql id="sql_select">
        SELECT t1.*,t2.ORG_NAME
    </sql>
    
    <sql id="sql_where">
        FROM  XUYU_PAYADDRESS t1 left join SYSTEM_AUTH_ORG  t2 on t1.AGENCY_ID=t2.ID
        <where>
            <if test="queryObj != null">
                <if test="queryObj.agencyId != null and queryObj.agencyId != ''">
                    AND AGENCY_ID=#{queryObj.agencyId}
                </if>
            </if>
        </where>
    </sql>
    
   <select id="selectUserListWithPage" parameterType="com.xuyurepos.common.page.PageModel" resultType="com.xuyurepos.entity.payment.XuyuPayaddress">
        <include refid="sql_select"></include>
        <include refid="sql_where"></include>
        <if test="pageNumber != null and  pageSize!= null">
            limit #{startRow},#{pageSize}
        </if>
    </select>

    <select id="selectUserCountWithPage" parameterType="com.xuyurepos.common.page.PageModel" resultType="Integer">
        <include refid="sql_count"></include>
        <include refid="sql_where"></include>
    </select>
    
</mapper>